<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CoreHabit Premium</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="/assets/styles.css" />

  <!-- Stripe Pricing Table -->


  <style>
    :root {
      --bg: #0b0f14;
      --panel: #111827;
      --text: #e9eef5;
      --muted: #a9b6c6;
      --purple: #7c5cff;
      --purple-soft: rgba(124,92,255,0.12);
      --gold: #d4af37;
      --border: rgba(255,255,255,0.08);
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background:
        radial-gradient(800px 400px at 15% -10%, rgba(124,92,255,0.22), transparent 60%),
        var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 32px 20px;
    }

    h1 {
      font-size: 50px;
      line-height: 1.08;
      margin-bottom: 16px;
      letter-spacing: -0.6px;
    }

    h2 {
      font-size: 32px;
      margin-bottom: 16px;
      letter-spacing: -0.3px;
    }

    h3 {
      font-size: 20px;
      margin-bottom: 8px;
    }

    p {
      color: var(--muted);
      max-width: 720px;
    }

    .section {
      margin-bottom: 96px;
    }

    .top-cta-row {
  display: flex;
  gap: 20px;
  margin-top: 30px;
  flex-wrap: wrap;
  justify-content: center;
}


    .top-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 14px 30px;
      min-width: 260px;
      height: 56px;
      border-radius: 999px;
      font-size: 16px;
      font-weight: 800;
      position: relative;
    }

    .premium-cta {
      background: linear-gradient(135deg, #d4af37, #f0d58c);
      color: #1a1a1a;
      text-decoration: none;
      box-shadow: 0 10px 28px rgba(212,175,55,0.35);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .premium-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 36px rgba(212,175,55,0.5);
    }

    .pricing-badge {
      background:
        linear-gradient(180deg, rgba(124,92,255,0.18), rgba(124,92,255,0.08)),
        var(--panel);
      color: var(--gold);
      border: 1px solid rgba(212,175,55,0.6);
      box-shadow:
        0 14px 34px rgba(124,92,255,0.3),
        inset 0 0 0 1px rgba(255,255,255,0.05);
      text-decoration: none;
    }

    .most-popular {
      position: absolute;
      top: -12px;
      right: -6px;
      background: linear-gradient(135deg, #7c5cff, #9b87ff);
      color: white;
      font-size: 11px;
      font-weight: 900;
      padding: 4px 10px;
      border-radius: 999px;
      letter-spacing: 0.6px;
      box-shadow: 0 6px 16px rgba(124,92,255,0.45);
    }

    .premium-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      margin: 40px 0;
    }

    .premium-card {
      background:
        linear-gradient(180deg, rgba(124,92,255,0.14), rgba(124,92,255,0.04)),
        var(--panel);
      border-radius: 18px;
      padding: 26px;
      border: 1px solid rgba(212,175,55,0.3);
      box-shadow: 0 8px 22px rgba(124,92,255,0.18);
    }

    .premium-tabs {
      display: flex;
      flex-direction: column;
      gap: 18px;
      margin-top: 32px;
    }

    .premium-tab {
      display: flex;
      gap: 16px;
      background:
        linear-gradient(180deg, rgba(124,92,255,0.12), rgba(124,92,255,0.03)),
        var(--panel);
      border: 1px solid rgba(212,175,55,0.35);
      border-radius: 16px;
      padding: 22px 26px;
      box-shadow: 0 8px 22px rgba(124,92,255,0.16);
    }

    .premium-tab-icon {
      font-size: 22px;
      margin-top: 2px;
    }

    .final-upgrade-panel {
      background:
        linear-gradient(180deg, rgba(124,92,255,0.18), rgba(124,92,255,0.06)),
        var(--panel);
      border: 1px solid rgba(212,175,55,0.55);
      border-radius: 24px;
      padding: 48px;
      box-shadow: 0 24px 48px rgba(124,92,255,0.35);
    }

    .savings-text {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      margin-top: 6px;
      text-align: center;
    }

    /* ===== Stripe Checkout Polish (ADDED) ===== */
    .stripe-checkout-wrapper {
      max-width: 640px;
      margin: 32px auto 0;
      padding: 24px;
      border-radius: 20px;
      background:
        linear-gradient(180deg, rgba(124,92,255,0.10), rgba(124,92,255,0.03)),
        var(--panel);
      border: 1px solid rgba(124,92,255,0.35);
      box-shadow:
        0 20px 45px rgba(0,0,0,0.45),
        inset 0 0 0 1px rgba(255,255,255,0.04);
    }

    stripe-pricing-table {
      --accent-color: #7c5cff;
      --text-color: #e9eef5;
      --background-color: transparent;
      --border-radius: 14px;
    }
    .premium-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 18px 36px;
  min-width: 260px;
  height: 60px;
  border-radius: 999px;
  border: none;
  font-size: 17px;
  font-weight: 800;
  cursor: pointer;
  letter-spacing: 0.04em;
  transition: all 0.2s ease;
}

.premium-btn-monthly {
  background: linear-gradient(135deg, #d4af37, #f0d58c);
  color: #1a1a1a;
  box-shadow: 0 18px 40px rgba(212,175,55,0.45);
}

.premium-btn-annual {
  background: linear-gradient(135deg, #7c5cff, #9b87ff);
  color: white;
  box-shadow: 0 18px 40px rgba(124,92,255,0.45);
}

.premium-btn:hover {
  transform: translateY(-3px);
}
    .auth-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.auth-box {
  background: #111827;
  padding: 40px;
  border-radius: 20px;
  width: 320px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.auth-box input {
  padding: 14px;
  border-radius: 10px;
  border: none;
  background: #1f2937;
  color: white;
}

.auth-box button {
  padding: 14px;
  border-radius: 999px;
  border: none;
  background: linear-gradient(135deg, #7c5cff, #9b87ff);
  color: white;
  font-weight: 700;
  cursor: pointer;
}
  </style>
 
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
window.supabaseClient = window.supabase.createClient(
  "https://wonbwlvnojtgydvpllmk.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvbmJ3bHZub2p0Z3lkdnBsbG1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NjExNjgsImV4cCI6MjA4NjIzNzE2OH0.AmWxx4I8t6MF2yo8FEv4CtMDlooASeg9Cy17fm_tslo"
);
</script>
</head>

<body>
  <div class="container">

    <!-- HERO -->
    <section class="section">
      <h1>Upgrade to CoreHabit Premium</h1>
      <p>Built for people who want real results, not generic plans.</p>

     <div class="top-cta-row">
  <button
    class="premium-btn premium-btn-monthly"
    onclick="startPremiumFlow('monthly')"
    style="min-width:220px;"
  >
    Go Premium ‚Äî Monthly
  </button>

  <button
    class="premium-btn premium-btn-annual"
    onclick="startPremiumFlow('annual')"
    style="min-width:220px;"
  >
    Go Premium ‚Äî Annual
  </button>
</div>

      <span class="savings-text">
        Save $89.89 per year compared to monthly
      </span>
    </section>

    <!-- VALUE -->
    <section class="section">
      <div class="premium-grid">
        <div class="premium-card">
          <h3>Done-for-you planning</h3>
          <p>No guessing. No overthinking. Your nutrition and training handled.</p>
        </div>
        <div class="premium-card">
          <h3>Built for beginners</h3>
          <p>Simple meals, clear workouts, realistic expectations.</p>
        </div>
        <div class="premium-card">
          <h3>Adapts with you</h3>
          <p>Your plan updates as your body and habits change.</p>
        </div>
      </div>
    </section>

    <!-- FEATURES -->
    <section class="section">
      <h2>What you get with Premium</h2>

      <div class="premium-tabs">
        <div class="premium-tab">
          <div class="premium-tab-icon">üõí</div>
          <div>
            <h3>Budget-Based Grocery List</h3>
            <p>Weekly groceries auto-generated to match your calories and budget.</p>
          </div>
        </div>

        <div class="premium-tab">
          <div class="premium-tab-icon">üçΩÔ∏è</div>
          <div>
            <h3>7-Day Meal Plan</h3>
            <p>A full week of meals built from your preferences.</p>
          </div>
        </div>

        <div class="premium-tab">
          <div class="premium-tab-icon">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
          <div>
            <h3>Targeted Muscle Group Workouts</h3>
            <p>Optional muscle focus without sacrificing balance.</p>
          </div>
        </div>

        <div class="premium-tab">
          <div class="premium-tab-icon">üìä</div>
          <div>
            <h3>Macro Targets & Progress Tracking</h3>
            <p>Exact targets with ongoing tracking.</p>
          </div>
        </div>

        <div class="premium-tab">
          <div class="premium-tab-icon">üîÑ</div>
          <div>
            <h3>Weekly Check-Ins & Plan Updates</h3>
            <p>Automatic adjustments based on results.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FINAL -->
    <section class="section">
      <div class="final-upgrade-panel">
        <h2>Choose your plan</h2>

        <div class="top-cta-row">
  <button
    class="premium-btn premium-btn-monthly"
    onclick="startPremiumFlow('monthly')"
    style="min-width:220px;"
  >
    Go Premium ‚Äî Monthly
  </button>

  <button
    class="premium-btn premium-btn-annual"
    onclick="startPremiumFlow('annual')"
    style="min-width:220px;"
  >
    Go Premium ‚Äî Annual
  </button>
</div>


<span class="savings-text">
  Save $89.89 per year compared to monthly
</span>

      </div>
    </section>

  </div>
  <script>
  const MONTHLY_PRICE_ID = "price_1SwtcqL0p80VWf6l3H8aBTYX";
  const ANNUAL_PRICE_ID  = "price_1SwtdaL0p80VWf6lV3WH9nLl";

  async function startCheckout(priceId) {
    try {
      const response = await fetch("/.netlify/functions/createCheckoutSession", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ priceId })
      });

      const data = await response.json();

      if (data.url) {
        window.location.href = data.url;
      } else {
        alert("Checkout failed. Please try again.");
      }
    } catch (err) {
      console.error("Checkout error:", err);
      alert("Something went wrong. Try again.");
    }
  }
</script>
  
  <!-- AUTH MODAL -->
<div id="authModal" class="auth-modal">
  <div class="auth-box">
    <h2>Continue to Premium</h2>
    <input id="authEmail" type="email" placeholder="Email" />
    <input id="authPassword" type="password" placeholder="Password" />
    <button onclick="submitAuth()">Continue</button>
  </div>
</div>
  <script>

let selectedPlan = null;

function startPremiumFlow(planType) {
  selectedPlan = planType;
  document.getElementById("authModal").style.display = "flex";
}

async function submitAuth() {

  const supabase = window.supabaseClient;

  const email = document.getElementById("authEmail").value;
  const password = document.getElementById("authPassword").value;

  if (!email || !password) return;

  let { data, error } = await supabase.auth.signInWithPassword({
    email,
    password
  });

  if (error) {
    const signupAttempt = await supabase.auth.signUp({
      email,
      password
    });

    if (signupAttempt.error) {
      alert(signupAttempt.error.message);
      return;
    }

    data = signupAttempt.data;
  }

  const user = data?.user;
  if (!user) {
    alert("Authentication failed.");
    return;
  }

  document.getElementById("authModal").style.display = "none";

  if (selectedPlan === "monthly") {
    window.location.href = "https://buy.stripe.com/test_5kQfZifqv5eb8yI1hQ0kE01";
  } else {
    window.location.href = "https://buy.stripe.com/test_eVq14obafgWT4isbWu0kE02";
  }
}

</script>
</body>
</html>
